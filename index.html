<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <title>GrepoBot Pro - Renovar Licencia</title>
    <!-- SDK PayPal sandbox, Â¡SIEMPRE PRIMERO! -->
    <script src="https://www.paypal.com/sdk/js?client-id=AdyTzXlIYrlebiqUrzbNoW1SwBPibQEMEF1NC_XX9u-nXyldB_ZslkgcOoeGshlmourfrjxST7Omg3TT&currency=USD"></script>
    <style>
        body { font-family: 'Segoe UI', Arial, sans-serif; background: #191919; color: #e0e0e0; margin:0;}
        .centerbox { background:#232323; max-width:420px; margin:40px auto; border-radius:12px; padding:28px; }
        h1 { color: #ffd700; text-align:center; }
        h2 { text-align:center; color:#4caf50; }
        .plans { display:flex; gap:10px; justify-content:center; margin-bottom:20px;}
        .plan-btn {font-size:17px;padding:12px 18px;min-width:110px;background:#2c2c26;border:2px solid #ffd700;color:#ffd700;border-radius:7px;cursor:pointer;}
        .plan-btn.selected {background:#ffd700;color:#222; }
        #paypal-area { margin-top:22px; text-align:center;}
        .alert {color:#fff;background:#4caf50;border-radius:9px;padding:9px 12px;margin-bottom:14px;}
    </style>
</head>
<body>
<div class="centerbox">
    <h1>ðŸ’Ž Renovar Licencia</h1>
    <div class="alert" id="welcome-msg">Selecciona tu plan y paga con PayPal o tarjeta</div>
    <div class="plans">
        <button class="plan-btn selected" onclick="seleccionarPlan('1M',7.99,this)">1 Mes<br>$7.99</button>
        <button class="plan-btn" onclick="seleccionarPlan('6M',45.00,this)">6 Meses<br>$45.00</button>
        <button class="plan-btn" onclick="seleccionarPlan('12M',80.00,this)">1 AÃ±o<br>$80.00</button>
    </div>
    <div id="paypal-area">
        <!-- AquÃ­ aparecerÃ¡ el botÃ³n de PayPal al seleccionar un plan -->
    </div>
</div>
<script>
    // Plan activo (default: 1 mes)
    let plan = {id: '1M', amount: 7.99};
    function seleccionarPlan(pid, amt, btn){
        plan = {id: pid, amount: amt};
        // Quitar seleccion
        document.querySelectorAll('.plan-btn').forEach(b=>b.classList.remove('selected'));
        btn.classList.add('selected');
        mostrarBotonPayPal();
    }
    // Mostrar sÃ³lo 1 vez el botÃ³n por cambio de plan
    function mostrarBotonPayPal() {
        document.getElementById('paypal-area').innerHTML = ''; // limpia el contenedor siempre
        paypal.Buttons({
            style: { color: 'gold', shape: 'rect', label: 'paypal', height: 45 },
            createOrder: (data, actions) => actions.order.create({
                purchase_units: [{ description: "Licencia GrepoBot (" + plan.id + ")", amount: { value: plan.amount.toFixed(2) } }]
            }),
            onApprove: function(data, actions) {
                // Puedes hacer lÃ³gica extra aquÃ­!
                document.getElementById('welcome-msg').textContent = 'âœ… Â¡Pago completado correctamente!';
                return actions.order.capture().then(function(details){
                    alert('Â¡Gracias, '+details.payer.name.given_name+'! Tu pago de $'+plan.amount+' fue aceptado en sandbox.');
                });
            }
        }).render('#paypal-area');
    }
    // Inicializa primer botÃ³n
    window.onload = mostrarBotonPayPal;
</script>
</body>
</html>